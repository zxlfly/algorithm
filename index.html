<script>
/**
 * @param {number[]} height
 * @return {number}
 */
 var trap = function(height) {
    let res = 0
    let s =[]
    for(let i=0;i<height.length;i++){
        while(s.length){
            let now = s.pop()
            if(s.length==0)continue
            res+=Math.min((height[i]-height[now]),(height[s[s.length-1]]-height[now]))*(i-1-s[s.length-1])
        }
        s.push(i)
    }
    return res
};
console.log(trap([0,1,0,2,1,0,1,3,2,1,2,1]));
</script>